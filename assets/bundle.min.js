$(function(){var offset=$(window).height()/2;var speed=250;var duration=500;$(window).scroll(function(){if($(this).scrollTop()<offset){$(".backToTop-container").fadeOut(duration)}else{$(".backToTop-container").fadeIn(duration)}});$(".backToTop-container").on("click",function(){$("html, body").animate({scrollTop:0},speed);return false})});$(function(){if($(".breadcrumbs-extended").length){var breadcrumbs=$(".header-breadcrumbsContainer");var extendedBreadcrumbs=$(".breadcrumbs-extended");var headerHeight=$(".site-header").height();var extendedBreadcrumbsHeight=extendedBreadcrumbs.outerHeight();var bottomPos=extendedBreadcrumbsHeight;if($(".tableOfContents-dropdown").css("display")!="none"){$(".tableOfContents.fixedMobile").css({position:"static"})}$(document).scroll(function(){if($(this).scrollTop()>=bottomPos&&breadcrumbs.hasClass("useExtended")){breadcrumbs.removeClass("useExtended").addClass("notExtended");if($(".tableOfContents-dropdown").css("display")!="none"){$(".tableOfContents.fixedMobile").css({position:"fixed",top:headerHeight+"px","z-index":51})}}else if($(this).scrollTop()<=bottomPos&&breadcrumbs.hasClass("notExtended")){breadcrumbs.removeClass("notExtended").addClass("useExtended");if($(".tableOfContents-dropdown").css("display")!="none"){$(".tableOfContents.fixedMobile").css({position:"static",top:"initial","z-index":"initial"})}}})}if($(".header-breadcrumbs").height()>$(".header-breadcrumbsContainer").height()){$(".header-breadcrumbsContainer").css({height:"initial","padding-top":"0.2rem","padding-bottom":"0.2rem"});var newHeight=$(".site-header").outerHeight();$("body").css("padding-top",newHeight)}});$(function(){if($(".home-body").length){$(".home-dropdownContainer button").click(function(){var dropdownID=$(this).attr("id");$("#"+dropdownID).closest(".home-dropdownContainer").toggleClass("open");$(".home-dropdownMenu[data-dropdown='"+dropdownID+"']").slideToggle()});$(document).click(function(event){if(!$(event.target).closest(".home-dropdownContainer").length){if($(".home-dropdownContainer").hasClass("open")){$(".home-dropdownContainer .home-dropdownMenu").slideUp();$(".home-dropdownContainer").removeClass("open")}}})}});$(function(){var mapJSON=[];$("polygon").each(function(){var state=$(this).attr("id");var points=$(this).attr("points");mapJSON.push({name:state,path:"M"+points})});$("#mapContainer").text(JSON.stringify(mapJSON))});$(function(){moveProgressBar();$(window).resize(function(){moveProgressBar()});function moveProgressBar(){$(".progress-wrap").each(function(){var getPercent=$(this).data("progress-percent")/100;var getProgressWrapWidth=$(this).width();var progressTotal=getPercent*getProgressWrapWidth;var animationLength=2500;$(this).children(".progress-bar").stop().animate({width:progressTotal},animationLength)})}var tooltips=document.querySelectorAll(".tip-content");window.onmousemove=function(e){var x=e.clientX+20+"px",y=e.clientY+20+"px";for(var i=0;i<tooltips.length;i++){tooltips[i].style.top=y;tooltips[i].style.left=x}}});$(function(){var mobileDisplay=$("#nav-toggle").css("display");if(mobileDisplay!="none"){$("#nav-toggle").click(function(){$(this).toggleClass("active")});$(".ss-nav > a").click(function(e){e.preventDefault();$(this).siblings("ul").toggle()});$(".header-navigationSiteOverlay").click(function(){$("#toggleMenu").prop("checked",false);$("#nav-toggle").toggleClass("active")})}$(window).resize(function(){mobileDisplay=$("#nav-toggle").css("display")})});$(function(){function paginationCheckHash(){if($(".pagination-posts-container").length==0){return}var hash=window.location.hash.replace("#","");var current_page=1;var subsector,sort_field,sort_order;if(hash){subsector=hash.substr(hash.indexOf("subsector=")).split("&")[0].split("=")[1];sort_field=hash.substr(hash.indexOf("sort=")).split("&")[0].split("=")[1];sort_order=hash.substr(hash.indexOf("order=")).split("&")[0].split("=")[1];current_page=hash.substr(hash.indexOf("page=")).split("&")[0].split("=")[1];if(subsector){$("a.sort-attribute").each(function(){var href=$(this).attr("href");var sortType=$(this).data("sort");var newHash="#subsector="+subsector+"&"+sortType;$(this).attr("href",href.replace(href,newHash))});$(".subsector-link").removeClass("active");$(".subsector-link[data-show-subsector='"+subsector+"']").first().addClass("active")}$("a.sort-attribute").removeClass("active");$("a.sort-attribute[data-sort='sort="+sort_field+"&order="+sort_order+"']").addClass("active")}else{$(".subsector-link[data-show-subsector='all']").addClass("active")}if(!sort_field){$(".sort-attribute").removeClass("active");$("a.sort-attribute[data-sort='sort=date&order=desc']").addClass("active")}$(".pagination-pagesContainer a").removeClass("active");$('.pagination-pagesContainer a[data-page="'+current_page+'"]').addClass("active");paginationCalculation(subsector,sort_field,sort_order,current_page)}window.onhashchange=paginationCheckHash;paginationCheckHash();if($(".sort-dropdown").length){$(".sort-dropdown").on("change",function(){var url=$(this).val();window.location=url})}function paginationCalculation(subsector,sort_field,sort_order,current_page){sort_field=sort_field||"date";sort_order=sort_order||"desc";current_page=current_page||1;var total_items=0;if(subsectorFiltering!=="undefined"&&subsectorFiltering==true&&!subsector){subsector="all"}if(current_page>1){var start_item=posts_per_page*(current_page-1);var end_item=posts_per_page*current_page-1}else{var start_item=0;var end_item=posts_per_page-1}$(".pagination-posts-container").empty();var posts;if(sort_field=="date"){if(subsector){posts=postsPaginateMainObject[subsector]}else{posts=postsPaginateMain}showSubheaders=false}else{if(subsector){posts=postsPaginateSecondaryObject[subsector]}else{posts=postsPaginateSecondary}showSubheaders=true}if(subsectorFiltering==true&&subsector!="all"){$(".subsectorFiltering-subsectorTitle").html(subsectorInfoObject[subsector].title);$(".subsectorFiltering-subsectorTitle").show("fast");$(".subsectorFiltering-subsectorInfo span").html($.parseHTML(unescape(subsectorInfoObject[subsector].content)));$(".subsectorFiltering-subsectorInfo").show("fast")}else if(subsector=="all"){$(".subsectorFiltering-subsectorTitle").hide("fast");$(".subsectorFiltering-subsectorInfo").hide("fast")}if(posts==undefined||posts.length==0){paginationNoResults()}else{if(sort_order=="desc"){posts.sort(dynamicSort("-"+sort_field))}else{posts.sort(dynamicSort(sort_field))}total_items=posts.length;var postsArray=posts.slice(start_item,end_item+1);paginationPostRender(postsArray,showSubheaders,subsector);paginationRender(total_items,end_item,subsector,sort_field,sort_order,current_page)}}function paginationPostRender(posts,showSubheaders,subsector){$.each(posts,function(index,post){if(post.state){var stateID=post.state.replace(" ","");if(showSubheaders&&$("#"+stateID).length==0){if(subsectorFiltering){total=postsPaginateSecondaryTotal[post.state][subsector]}else{total=postsPaginateSecondaryTotal[post.state]}$(".pagination-posts-container").append("<h3 class='sectionTitle pagination-sectionTitle' id='"+stateID+"'>"+post.state+"</h3>")}}else if(post.sector){var sectorID=post.sector.replace(" ","");if(showSubheaders&&$("#"+sectorID).length==0){$(".pagination-posts-container").append("<h3 class='sectionTitle pagination-sectionTitle' id='"+sectorID+"'>"+post.sector+"</h3>")}}$(".pagination-posts-container").append($.parseHTML(unescape(post.postHtml)))})}function paginationRender(total_items,end_item,subsector,sort_field,sort_order,current_page){var total_pages=Math.ceil(total_items/posts_per_page);$(".pagination-pagesContainer").empty();if(total_pages>1){if(subsector){var hash="#subsector="+subsector+"&amp;sort="+sort_field+"&amp;order="+sort_order+"&amp;page="}else{var hash="#sort="+sort_field+"&amp;order="+sort_order+"&amp;page="}current_page=parseInt(current_page);if(current_page>1){$(".pagination-pagesContainer").append("<a href='"+hash+"1' data-page='1' class='next-prev'>«</a>");var previousPage=current_page-1;$(".pagination-pagesContainer").append("<a href='"+hash+previousPage+"' data-page='"+previousPage+"' class='next-prev'>&#8249; Previous</a>")}if(total_pages>5&&current_page>=4){var startPoint=current_page-2;if(current_page+2>total_pages){var endPoint=total_pages}else{var endPoint=current_page+2}}else if(total_pages>5&&current_page<4){var startPoint=1;var endPoint=5}else{var startPoint=1;var endPoint=total_pages}for(var i=startPoint;i<=endPoint;i++){if(i==current_page){var activeClass="active"}else{var activeClass=""}$(".pagination-pagesContainer").append("<a href='"+hash+i+"' class='"+activeClass+"' data-page='"+i+"'><button class='btn-gray'>"+i+"</button></a>")}if(current_page<total_pages){var nextPage=current_page+1;$(".pagination-pagesContainer").append("<a href='"+hash+nextPage+"' data-page='"+nextPage+"' class='next-prev'>Next &#8250;</a>");$(".pagination-pagesContainer").append("<a href='"+hash+total_pages+"' data-page='"+total_pages+"' class='next-prev'>»</a>")}}$(".pagination-totalResults").html(total_items+" total results | Page "+current_page+" of "+total_pages)}function paginationNoResults(){$(".pagination-totalResults").html("0 total results");$(".pagination-posts-container").html("<p class='noResults'>There are currently no related articles in this subsector.</p>");$(".pagination-pagesContainer").empty()}$(".pagination-pagesContainer").on("click","a",function(){var top=$(".pagination-sortByContainer").offset().top-$(".site-header").outerHeight();$("html, body").scrollTop(top)});function dynamicSort(property){var sortOrder=1;if(property[0]==="-"){sortOrder=-1;property=property.substr(1)}return function(a,b){var result=a[property]<b[property]?-1:a[property]>b[property]?1:0;return result*sortOrder}}});$(function(){var hash=window.location.hash.replace("#","");var activeSubsector=hash.substr(hash.indexOf("subsector=")).split("&")[0].split("=")[1];var activeSector=$(".post-listing").data("sector");if(activeSubsector){switchActiveSubsector(activeSector,activeSubsector)}$(".subsector-link").click(function(){var activeSector=$(this).data("sector");var activeSubsector=$(this).data("show-subsector");switchActiveSubsector(activeSector,activeSubsector)});function switchActiveSubsector(activeSector,activeSubsector){$(".post-listing[data-sector='"+activeSector+"'] .active").removeClass("active").addClass("hidden");$(".post-listing[data-sector='"+activeSector+"'] [data-subsector='"+activeSubsector+"']").removeClass("hidden").addClass("active")}});$(function(){$(".site-header .search-icon").click(function(){if(navigator.userAgent.indexOf("MSIE")!==-1||navigator.appVersion.indexOf("Trident/")>0){location.href="/search/"}else{$(".search-overlay").show()}});document.onkeydown=function(evt){evt=evt||window.event;var isEscape=false;if("key"in evt){isEscape=evt.key=="Escape"||evt.key=="Esc"}else{isEscape=evt.keyCode==27}if(isEscape){$(".search-overlay").hide()}};$(".search-overlay .search-closeIcon").click(function(){$(".search-overlay").hide()})});if($(".search-container").length){app({appId:"7UNKAH6RMH",apiKey:"b9011cf7f49e60630161fcacf0e37d02",indexName:"india_states"});function app(opts){var search=instantsearch({appId:opts.appId,apiKey:opts.apiKey,indexName:opts.indexName,urlSync:true});search.addWidget(instantsearch.widgets.searchBox({container:"#search-input",placeholder:"Search"}));search.addWidget(instantsearch.widgets.hits({container:"#hits",hitsPerPage:10,templates:{item:getTemplate("hit"),empty:getTemplate("no-results")},transformData:{item:function(data){if(data.content_type=="Articles"||data.content_type=="Analysis"){data.formattedDate='<span class="articleMeta hit-date">Posted on <span class="articleDate">'+data.date+"</span></span>"}else{data.formattedDate=null}return data}}}));search.addWidget(instantsearch.widgets.stats({container:"#stats",templates:{body:"{{{nbHits}}} total results | Page {{{currentPage}}} of {{{nbPages}}}"},transformData:function(refinement){return{currentPage:refinement.page+1,nbHits:refinement.nbHits,nbPages:refinement.nbPages}}}));search.addWidget(instantsearch.widgets.sortBySelector({container:"#sort-by",autoHideContainer:true,indices:[{name:opts.indexName,label:"Date DESC"},{name:"india_states_date_asc",label:"Date ASC"}]}));search.addWidget(instantsearch.widgets.pagination({container:"#pagination",scrollTo:"#search-input",labels:{previous:"&#8249; Previous",next:"Next &#8250;"}}));search.addWidget(instantsearch.widgets.refinementList({container:"#content_type",attributeName:"content_type",sortBy:["isRefined","count:desc","name:asc"],limit:10,operator:"or",templates:{header:getHeader("Type")}}));search.addWidget(instantsearch.widgets.refinementList({container:"#states",attributeName:"states",sortBy:["isRefined","count:desc","name:asc"],limit:10,operator:"or",templates:{header:getHeader("States")},searchForFacetValues:{placeholder:"Search for states",templates:{noResults:'<div class="sffv_no-results">No matching states.</div>'}}}));search.addWidget(instantsearch.widgets.refinementList({container:"#sectors",attributeName:"sectors",sortBy:["isRefined","count:desc","name:asc"],limit:10,operator:"or",templates:{header:getHeader("Sectors")}}));search.addWidget(instantsearch.widgets.refinementList({container:"#tags",attributeName:"tags",sortBy:["isRefined","count:desc","name:asc"],limit:10,operator:"or",searchForFacetValues:{placeholder:"Search for tags",templates:{noResults:'<div class="sffv_no-results">No matching tags.</div>'}},templates:{header:getHeader("Tags")}}));search.start()}function getTemplate(templateName){return document.querySelector("#"+templateName+"-template").innerHTML}function getHeader(title){return'<h4 class="sectionSubtitle">'+title+"</h4>"}}$(function(){$("body").on("click",".share-print.printIndividual",function(){var printableContent=$(this).parents(".post-articleContainer");var originalContents=$(".page-content").html();var printContents=printableContent.html();$(".page-content").html(printContents);window.print();$(".page-content").html(originalContents)});$("body").on("click",".share-print.printEntire",function(){$(".printable").removeClass("printable");$("body").addClass("printable");window.print()});$("body").on("click",".share-social",function(e){e.preventDefault()});$(".share-social").hover(function(){$(this).children(".share-socialContainer").show()},function(){$(this).children(".share-socialContainer").hide()})});$(function(){$("body").on("click",".post-articleShowMoreMeta img",function(){var postID=$(this).parent(".post-articleShowMoreMeta").data("post");$(this).hide();$(this).siblings().show();$(".post-articleExtraMetaIndicator[data-post='"+postID+"']").toggle();$(".post-articleExtraMeta[data-post='"+postID+"']").toggle();var metaDisplayProp=$(".post-articleExtraMeta[data-post='"+postID+"']").css("display");if(metaDisplayProp=="block"){$(".post-articleExtraMeta[data-post='"+postID+"']").css("display","inline")}})});$(function(){$("a.smoothScroll").on("click",function(event){if(this.hash!==""){event.preventDefault();var hash=this.hash;$("html, body").animate({scrollTop:$(hash).offset().top-200},800,function(){window.location.hash=hash})}})});$(function(){if($(".statesLanding-mainContent").length){$(".stateLink").hover(function(){var stateID=$(this).data("state");highlightState(stateID,"highlight")},function(){var stateID=$(this).data("state");highlightState(stateID,"unhighlight")});$("#map path, #map g").not($(".nolink")).hover(function(){var stateID=$(this).attr("id");highlightList(stateID,"highlight");highlightState(stateID,"highlight")},function(){var stateID=$(this).attr("id");highlightList(stateID,"unhighlight");highlightState(stateID,"unhighlight")});$("#map path.nolink, #map g.nolink, #map polygon").hover(function(e){var x=e.clientX+20+"px",y=e.clientY+20+"px";var stateID=$(this).attr("id");state=stateID.replace(/-/g," ");state=state.toUpperCase();$(".statesLanding-map").append("<div class='tooltip' style='top: "+y+"; left: "+x+"'><span>"+state+"</span><br /> No data available.</div>")},function(){$(".statesLanding-map .tooltip").remove()});$("#map path, #map g").not($(".nolink")).click(function(){var stateID=$(this).attr("id");location.href="/states/"+stateID})}});function highlightState(stateID,action){var state=$("path#"+stateID+", #"+stateID+" path");if(action=="highlight"){state.addClass("active")}else{state.removeClass("active")}}function highlightList(stateID,action){var stateLink=$("a[data-state='"+stateID+"']");if(action=="highlight"){stateLink.addClass("active")}else{stateLink.removeClass("active")}}$(function(){if($(".isSticky").length){var windw=this;var headerHeight=$(".site-header").outerHeight()+32;var followToPos=$(".isSticky").offset().top-headerHeight;var tocPadding=$(".isSticky").parent(".tableOfContents").offset().top-$(".isSticky").offset().top;var stopFollowPos=$(".isSticky").parent(".tableOfContents").outerHeight();var stickyWidth=$(".isSticky").width();$.fn.followTo=function(pos){var $this=this,$window=$(windw);$window.scroll(function(e){currentPos=$(document).height()-($(window).height()+$("body").scrollTop());if($window.scrollTop()>pos&&currentPos<stopFollowPos){$this.css({position:"fixed",top:headerHeight,width:stickyWidth})}else if($window.scrollTop()<pos){$this.css({position:"initial",top:0})}})};$(".isSticky").followTo(followToPos)}if($(".tableOfContents-dropdown").length){$(".tableOfContents-dropdown").on("change",function(){var url=$(this).val();window.location=url;if(url!="#"){$(".tableOfContents-instructions").css("display","inline-block")}else{$(".tableOfContents-instructions").hide()}})}});